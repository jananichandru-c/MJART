<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MJart - Premium Photo Editor</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --neon-green: #A2FF32;
            --dark-bg: #000000;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(162, 255, 50, 0.2);
            --text-main: #ffffff;
            --midnight: #0F0F1E;
            --card-bg: #1A112E;
        }

        body.light-mode {
            --dark-bg: #ffffff;
            --text-main: #000000;
            --border-color: #dddddd;
            --midnight: #f0f0f0;
        }

        * { box-sizing: border-box; transition: all 0.25s ease-in-out; }

        body {
            margin: 0;
            background-color: var(--dark-bg);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }
        /* --- LOADING OVERLAY --- */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(162, 255, 50, 0.1);
            border-top: 3px solid var(--neon-green);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- HEADER --- */
        .header {
            padding: 20px 50px;
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-logo a {
            font-family: 'Syne', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            color: var(--neon-green);
            text-decoration: none;
            text-transform: uppercase;
        }

        .header-search { width: 450px; position: relative; }
        .search-input {
            width: 100%;
            background: #111;
            border: 1px solid #333;
            padding: 12px 25px;
            border-radius: 50px;
            color: white;
            outline: none;
        }
        .search-input:focus { border-color: var(--neon-green); }

        .header-right {
            display: flex;
            gap: 25px;
            font-size: 1.4rem;
            color: var(--neon-green);
            justify-content: flex-end;
            align-items: center;
        }

        .header-right i { cursor: pointer; }

        /* --- DROPDOWNS --- */
        .dropdown-container { position: relative; }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: #111;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            width: 250px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            z-index: 1001;
            overflow: hidden;
        }
        .dropdown-header {
            padding: 12px 15px;
            background: #1a1a1a;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--neon-green);
            border-bottom: 1px solid #222;
        }
        .dropdown-item {
            padding: 12px 15px;
            font-size: 0.85rem;
            color: #ccc;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-decoration: none;
        }
        .dropdown-item:hover { background: #151515; color: var(--neon-green); }
        .show { display: block !important; }

        /* --- FULL SCREEN VIEWS (Pages) --- */
        .page-view {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--midnight);
            z-index: 2000;
            overflow-y: auto;
            padding: 60px 20px;
        }

        .view-container {
            max-width: 500px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 24px;
            border: 1px solid rgba(162, 255, 50, 0.2);
            text-align: center;
        }

        .view-container h1 { 
            font-family: 'Syne'; 
            color: var(--neon-green); 
            margin-bottom: 20px;
        }

        .form-group { text-align: left; margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: #888; font-size: 0.9rem; }
        .form-group input {
            width: 100%; padding: 12px; border-radius: 8px;
            background: #0F0F1E; border: 1px solid #333; color: white;
        }

        .action-btn {
            width: 100%; padding: 15px; background: var(--neon-green);
            border: none; border-radius: 12px; font-weight: 800; cursor: pointer;
            margin-top: 10px;
        }

        .close-view {
            margin-top: 20px; color: #666; cursor: pointer; display: inline-block;
        }

        /* --- INDEX CONTENT --- */
        .main-content {
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; min-height: calc(100vh - 80px);
            text-align: center;
        }

        .hero-title {
            font-family: 'Syne', sans-serif; font-size: 3.2rem;
            color: var(--neon-green); text-transform: uppercase;
            font-weight: 800; letter-spacing: -3px;
        }

        .feature-buttons { display: flex; gap: 20px; margin-top: 40px; }

        .feature-btn {
            text-decoration: none; background: white; padding: 18px 40px;
            border-radius: 50px; display: flex; align-items: center; gap: 12px;
            color: #000; font-weight: 700; animation: float 3s ease-in-out infinite;
        }

        .feature-btn:hover { background: var(--neon-green); transform: translateY(-5px); }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        /* Tour Highlight */
        .tour-highlight {
            outline: 4px solid var(--neon-green) !important;
            box-shadow: 0 0 50px var(--neon-green) !important;
            z-index: 9999 !important;
        }

        /* Table Styling for Admin */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            color: white;
        }
        .admin-table th {
            border-bottom: 2px solid var(--neon-green);
            padding: 12px;
            text-align: left;
            color: var(--neon-green);
        }
        .admin-table td {
            padding: 12px;
            border-bottom: 1px solid #333;
        }
    </style>
</head>
<body>

    <div id="signupPage" class="page-view">
        <div class="view-container">
            <h1>Join <span style="color:white">Us</span></h1>
            <div class="form-group"><label>Full Name</label><input type="text" id="sName"></div>
            <div class="form-group"><label>Email</label><input type="email" id="sEmail"></div>
            <div class="form-group"><label>Phone</label><input type="text" id="sPhone"></div>
            <div class="form-group"><label>DOB</label><input type="text" placeholder="DD/MM/YYYY" id="sDOB"></div>
            <div class="form-group"><label>Password</label><input type="password" id="sPass"></div>
            <button class="action-btn" onclick="execSignup()">GET STARTED</button>
            <span class="close-view" onclick="closePage('signupPage')">‚Üê Back to Explorer</span>
        </div>
    </div>

    <div id="loginPage" class="page-view">
        <div class="view-container">
            <h1>Sign <span style="color:white">In</span></h1>
            <div class="form-group"><label>Email</label><input type="email" id="lEmail"></div>
            <div class="form-group"><label>Password</label><input type="password" id="lPass"></div>
            <button class="action-btn" onclick="execLogin()">LOGIN</button>
            <span class="close-view" onclick="closePage('loginPage')">‚Üê Back to Explorer</span>
        </div>
    </div>

    <div id="profilePage" class="page-view">
        <div class="view-container" style="text-align: left;">
            <h1 style="text-align: center;">Your <span style="color:white">Profile</span></h1>
            <div id="profileContent" style="line-height: 2;"></div>
            <button class="action-btn" onclick="closePage('profilePage')" style="background: #444; color: white;">Back</button>
        </div>
    </div>

    <div id="adminPage" class="page-view">
        <div class="view-container" style="max-width: 800px;">
            <h1>Admin <span style="color:white">Database</span></h1>
            <div style="overflow-x: auto;">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th>DOB</th>
                        </tr>
                    </thead>
                    <tbody id="adminUserList"></tbody>
                </table>
            </div>
            <button class="action-btn" onclick="closePage('adminPage')" style="background: #444; color: white; margin-top: 30px;">Close Admin View</button>
        </div>
    </div>

    <header class="header">
        <div class="header-logo"><a href="/">MJart</a></div>

        <div class="header-search" id="tour-search">
            <input type="text" placeholder="Search templates, designs..." class="search-input">
        </div>

        <div class="header-right">
            <div class="dropdown-container">
                <i class="fas fa-bell" id="tour-bell" onclick="toggleDrop('notifDrop')"></i>
                <div id="notifDrop" class="dropdown-menu">
                    <div class="dropdown-header">NOTIFICATIONS</div>
                    <div class="dropdown-item">‚ú® AI Upscaling finished.</div>
                </div>
            </div>

            <div class="dropdown-container">
                <i class="fas fa-user-circle" id="tour-profile" onclick="toggleDrop('profileDrop')"></i>
                <div id="profileDrop" class="dropdown-menu">
                    <div class="dropdown-header">PROFILE</div>
                    <div class="dropdown-item" onclick="openProfile()">Your Profile</div>
                    <div class="dropdown-item" onclick="toggleLightMode()">Switch to Light Mode</div>
                    <div class="dropdown-item" onclick="startTour()">Show Tour</div>
                    <div class="dropdown-item" onclick="logout()" style="color: #ff4d4d;">Logout</div>
                </div>
            </div>

            <div class="dropdown-container">
                <i class="fas fa-bars" id="tour-menu" onclick="toggleDrop('menuDrop')"></i>
                <div id="menuDrop" class="dropdown-menu">
                    <div class="dropdown-item" onclick="openPage('loginPage')">Login</div>
                    <div class="dropdown-item" onclick="openPage('signupPage')">Signup</div>
                    <div class="dropdown-item" onclick="window.location.href='/wishlist'">Wishlist</div>
                    <div class="dropdown-item" onclick="openAdmin()">Settings (Admin)</div>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <h1 class="hero-title">FREE ONLINE EDITOR</h1>
        <p class="hero-subtitle">Minimalist tools for your professional creative journey.</p>

        <div class="feature-buttons">
            <a href="/chat" class="feature-btn">
                <span class="feature-icon">üí¨</span>
                <span>Chat to edit</span>
            </a>
            <a href="/design-selection" class="feature-btn" style="animation-delay: 0.5s;">
                <span class="feature-icon">‚úèÔ∏è</span>
                <span>Create design</span>
            </a>
        </div>
    </main>

    <script>
        let currentUser = JSON.parse(localStorage.getItem('userSession')) || null;

        function toggleDrop(id) {
            document.querySelectorAll('.dropdown-menu').forEach(m => m.id !== id && m.classList.remove('show'));
            document.getElementById(id).classList.toggle("show");
        }

        function openPage(id) { document.getElementById(id).style.display = 'block'; }
        function closePage(id) { document.getElementById(id).style.display = 'none'; }

        // Signup Logic
        function execSignup() {
            const user = {
                name: document.getElementById('sName').value,
                email: document.getElementById('sEmail').value,
                phone: document.getElementById('sPhone').value,
                dob: document.getElementById('sDOB').value,
                pass: document.getElementById('sPass').value
            };
            let db = JSON.parse(localStorage.getItem('userDB')) || [];
            db.push(user);
            localStorage.setItem('userDB', JSON.stringify(db));
            alert("Registered successfully!");
            closePage('signupPage');
        }

        // Login Logic
        function execLogin() {
            let db = JSON.parse(localStorage.getItem('userDB')) || [];
            const email = document.getElementById('lEmail').value;
            const pass = document.getElementById('lPass').value;
            const user = db.find(u => u.email === email && u.pass === pass);
            
            if(user) {
                currentUser = user;
                localStorage.setItem('userSession', JSON.stringify(user));
                alert("Welcome back, " + user.name);
                closePage('loginPage');
            } else {
                alert("Invalid username and password");
            }
        }

        // Profile Logic
        function openProfile() {
            if(!currentUser) {
                openPage('signupPage');
            } else {
                document.getElementById('profileContent').innerHTML = `
                    <b>NAME:</b> ${currentUser.name}<br>
                    <b>EMAIL:</b> ${currentUser.email}<br>
                    <b>PHONE:</b> ${currentUser.phone}<br>
                    <b>DOB:</b> ${currentUser.dob}
                `;
                openPage('profilePage');
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('userSession');
            alert("Logged out.");
        }

        function toggleLightMode() { document.body.classList.toggle('light-mode'); }

        // REAL TOUR LOGIC
        async function startTour() {
            const steps = [
                {id: 'tour-search', msg: 'Search for templates here.'},
                {id: 'tour-bell', msg: 'Check notifications for updates.'},
                {id: 'tour-profile', msg: 'Manage your personal profile and data.'},
                {id: 'tour-menu', msg: 'Access Login, Signup, and Admin settings.'}
            ];

            for (let step of steps) {
                const el = document.getElementById(step.id);
                el.classList.add('tour-highlight');
                alert(step.msg);
                el.classList.remove('tour-highlight');
            }
        }

        // UPDATED ADMIN LOGIC
        function openAdmin() {
            const p = prompt("Admin Password:");
            if(p === "160805") {
                const db = JSON.parse(localStorage.getItem('userDB')) || [];
                const list = document.getElementById('adminUserList');
                list.innerHTML = ""; // Clear existing

                if(db.length === 0) {
                    list.innerHTML = "<tr><td colspan='4' style='text-align:center;'>No users registered.</td></tr>";
                } else {
                    db.forEach(user => {
                        list.innerHTML += `
                            <tr>
                                <td>${user.name}</td>
                                <td>${user.email}</td>
                                <td>${user.phone}</td>
                                <td>${user.dob}</td>
                            </tr>
                        `;
                    });
                }
                openPage('adminPage');
            } else {
                alert("Denied.");
            }
        }
    </script>
</body>
</html>